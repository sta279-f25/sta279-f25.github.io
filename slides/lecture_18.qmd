---
title: "Strings and regular expressions"
format: 
  revealjs:
    theme: theme.scss
editor: source
execute: 
  echo: true
editor_options: 
  chunk_output_type: console
---

```{r, include=F}
library(tidyverse)
```

## Recap: regular expressions

A *regular expression* is a pattern used to find matches in text.

**Example:** suppose I want to extract just the lecture number from the following file name. How would I do that?

```{r, eval=F}
"teaching/sta279-f23/slides/lecture_22.qmd"
```

## Recap: regular expressions

A *regular expression* is a pattern used to find matches in text.

**Example:** suppose I want to extract just the lecture number from the following file name. How would I do that?

```{r}
str_extract("teaching/sta279-f23/slides/lecture_22.qmd", "\\d+")
```

```{r}
str_extract("teaching/sta279-f23/slides/lecture_22.qmd", "_\\d+")
```

```{r}
str_extract("teaching/sta279-f23/slides/lecture_22.qmd", 
            "(?<=_)\\d+")
```

## Recap: regular expressions

Last time, we learned the following regular expression tools:

* `\d` matches any digit (in R, have to type `\\d` because we write the regex in a string)
* `.` matches any character (except `\n`)
* `+` means "at least once"
* `(?<=)` and `(?=)` are positive lookbehinds and lookaheads
* `|` is alternation (one pattern or another)

## More regular expressions

```{r}
strings <- c("apple", "banana", "raspberry", 
             "blackberry", "grrreat", "random")
```

How would I select just `raspberry` and `blackberry`?

## More regular expressions

```{r}
strings <- c("apple", "banana", "raspberry", 
             "blackberry", "grrreat", "random")
```

How would I select just `raspberry` and `blackberry`?

```{r}
str_view(strings, "berry")
```

## More regular expressions

```{r}
strings <- c("apple", "banana", "raspberry", 
             "blackberry", "grrreat", "random")
```

How would I select "raspberry", "blackberry", "grrreat", and "random"?

## More regular expressions

```{r}
strings <- c("apple", "banana", "raspberry", 
             "blackberry", "grrreat", "random")
```

How would I select "raspberry", "blackberry", "grrreat", and "random"?

```{r}
str_view(strings, "r")
```

## More regular expressions

```{r}
strings <- c("apple", "banana", "raspberry", 
             "blackberry", "grrreat", "random")
```

How would I select just "raspberry", "blackberry", and "grrreat"?


## More regular expressions

```{r}
strings <- c("apple", "banana", "raspberry", 
             "blackberry", "grrreat", "random")
```

How would I select just "raspberry", "blackberry", and "grrreat"?

```{r}
str_view(strings, "rr+")
```

```{r}
str_view(strings, "r{2,}")
```


## More regular expressions

```{r}
strings <- c("apple", "banana", "raspberry", 
             "blackberry", "grrreat", "random")
```

How would I select just "grrreat"?

```{r}
str_view(strings, "r{3}")
```

## More regular expressions

```{r}
strings <- c("apple", "banana", "raspberry", 
             "blackberry", "grrreat", "random")
```

How would I select "apple", "raspberry", "blackberry", and "grrreat"?

## More regular expressions

```{r}
strings <- c("apple", "banana", "raspberry", 
             "blackberry", "grrreat", "random")
```

How would I select "apple", "raspberry", "blackberry", and "grrreat"?

```{r}
str_view(strings, "(.)\\1")
```

## More regular expressions

```{r}
strings <- c("papa", "banana", "memento", 
             "blackberry", "grrreat", "random")
```

How would I select "papa", "banana", and "memento"?

## More regular expressions

```{r}
strings <- c("papa", "banana", "memento", 
             "blackberry", "grrreat", "random")
```

How would I select "papa", "banana", and "memento"?

```{r}
str_view(strings, "(..)\\1")
```

```{r}
str_view(strings, "(..)+")
```

## More regular expressions

```{r, eval=F}
"The mean $\\mu$ is defined by $\\mu = \\frac{1}{n} \\sum_i x_i$"
```

How would I extract `$\mu$` and `$\mu = \frac{1}{n} \sum_i x_i$`?

## More regular expressions

```{r, eval=F}
"The mean $\\mu$ is defined by $\\mu = \\frac{1}{n} \\sum_i x_i$"
```

How would I extract `$\mu$` and `$\mu = \frac{1}{n} \sum_i x_i$`?

```{r}
str_extract("The mean $\\mu$ is defined by $\\mu = \\frac{1}{n} \\sum_i x_i$",
            "\\$.+\\$")
```

## More regular expressions

```{r, eval=F}
"The mean $\\mu$ is defined by $\\mu = \\frac{1}{n} \\sum_i x_i$"
```

How would I extract `$\mu$` and `$\mu = \frac{1}{n} \sum_i x_i$`?

Option 1:

```{r}
str_extract_all("The mean $\\mu$ is defined by $\\mu = \\frac{1}{n} \\sum_i x_i$",
            "\\$.+?\\$")
```


## More regular expressions

```{r, eval=F}
"The mean $\\mu$ is defined by $\\mu = \\frac{1}{n} \\sum_i x_i$"
```

How would I extract `$\mu$` and `$\mu = \frac{1}{n} \sum_i x_i$`?

Option 2:

```{r}
str_extract_all("The mean $\\mu$ is defined by $\\mu = \\frac{1}{n} \\sum_i x_i$",
            "\\$[^\\$]+\\$")
```

## Class activity

* Work independently or with a neighbor on the class activity
* At the end of class, submit your work as an HTML file on Canvas (one per group, list all your names)


